'https://editor.plantuml.com/
'Sequence Diagram 3: Вътрешен ABC итеративен цикъл

@startuml
' === Класически UML стил със силно визуално присъствие ===
skinparam style strictuml
skinparam roundcorner 0
skinparam ArrowColor Black
skinparam ArrowFontColor Black
skinparam sequenceMessageAlignment center

participant generator as "generator : HybridArtificialBeeColonyTestCaseGenerator"
participant evaluator as "evaluator : ITestCaseEvaluator"
participant randomizer as "randomizer : Random"

note over generator
Фаза 1: Стартиране на RunABCAlgorithm()
end note

generator -> generator : CreateInitialPopulation()
generator -> evaluator : EvaluatePopulation(initialPopulation)

loop за всяко поколение

    note over generator
    Фаза 2: Мутация на популацията
    end note

    generator -> randomizer : Избор на тест кейсове за мутация
    generator -> generator : Прилагане на мутации

    note over generator
    Фаза 3: Оценка на новата популация
    end note

    generator -> evaluator : EvaluatePopulation(mutatedPopulation)

    note over generator
    Фаза 4: Проверка за стагнация и подобрение
    end note

    generator -> generator : Проверка на подобрение

    alt Ако няма подобрение
        generator -> generator : IncreaseStagnationCounter()
    else Ако има подобрение
        generator -> generator : UpdateBestPopulation()
    end

end

note over generator
Фаза 5: Финален избор
end note

generator -> generator : SelectFinalPopulation()

@enduml